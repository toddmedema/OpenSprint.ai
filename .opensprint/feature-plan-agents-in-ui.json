{
  "title": "Agent Information in UI",
  "content": "# Agent Information in UI\n\n## Overview\n\nSurface agent role descriptions, phase mappings, and workflow context directly in the OpenSprint UI so users never need to open the README, codebase, or GitHub to understand what each agent does. The goal is a self-explanatory interface where first-time users can complete a full Sketch–Execute cycle without external documentation.\n\n**Problem:** Agent info (names, phases, descriptions) exists only in the README. Users see agent icons and role labels in the UI (e.g., ActiveAgentsList, Execute phase) but have no in-app way to learn what Dreamer, Planner, Harmonizer, etc. actually do.\n\n**Solution:** Add a centralized agent reference (\"Meet the Agent Team\") accessible from the Navbar and phase-specific context (e.g., \"You're chatting with Dreamer\") so users understand who they're interacting with and what each agent is responsible for.\n\n## Acceptance Criteria\n\n- [ ] **Agent reference modal:** A \"Meet the Agent Team\" (or \"Agents\") entry point in the Navbar opens a modal/slide-over showing all 9 agents with icon, name, phase(s), and description. Content matches README table (Dreamer, Planner, Harmonizer, Analyst, Summarizer, Auditor, Coder, Reviewer, Merger).\n- [ ] **Phase-specific agent context:** In Sketch phase, the chat header or PRD panel shows \"Chatting with Dreamer\" plus a one-line description or tooltip. In Plan phase, context for Planner/Harmonizer/Auditor when relevant. In Execute, active agent list items show role description on hover or in expanded view.\n- [ ] **Setup wizard Agents step:** The Agent Config step includes a collapsible \"What do these agents do?\" section (or inline callout) that links to or embeds the agent reference so new users understand the Planning vs Coding slots before configuring.\n- [ ] **Single source of truth:** Agent metadata (name, phase, description) lives in shared package and is consumed by frontend. README can optionally be generated from or kept in sync with this source.\n- [ ] **Accessibility:** Agent reference is keyboard-navigable and screen-reader friendly. Descriptions are concise (< 100 chars for inline, ~1 sentence for modal).\n\n## Technical Approach\n\n1. **Shared agent metadata:** Add `AGENT_ROLE_DESCRIPTIONS` and `AGENT_ROLE_PHASES` (or equivalent) to `packages/shared/src/types/agent.ts`. Each role maps to a short description (README-style) and primary phase(s). Export for frontend consumption.\n2. **Agent reference component:** Create `AgentReferenceModal` (or `AgentTeamModal`) in `packages/frontend/src/components/`. Renders a grid/list of agents with icon, label, phase badge(s), and description. Reuse existing agent icons from `public/agent-icons/`.\n3. **Navbar entry point:** Add a \"Help\" or \"Agents\" icon/button in the Navbar (next to settings or in a dropdown). Click opens `AgentReferenceModal`. Alternatively, add under a \"?\" or info icon that opens a help menu with \"Meet the Agent Team\" as first item.\n4. **Phase context:** In `PrdChatPanel` (Sketch), add a header line: \"Chatting with Dreamer — refines your idea into a PRD.\" In Plan phase, show Planner context when creating/editing plans. In Execute, enhance `ActiveAgentsList` dropdown items with a tooltip or expandable description using the shared metadata.\n5. **Setup wizard:** In `AgentsStep`, add a collapsible section \"About the agent team\" that either (a) renders a compact agent list with descriptions, or (b) shows a \"Learn more\" link that opens the same `AgentReferenceModal` (if modal can be opened from setup flow).\n\n## Dependencies\n\n- None. Uses existing agent icons, shared types, and UI patterns.\n- Optional: If README sync is desired, a small script could generate the README table from shared metadata; out of scope for initial implementation.\n\n## Data Model Changes\n\n- **Shared package:** Extend `packages/shared/src/types/agent.ts` with:\n  - `AGENT_ROLE_DESCRIPTIONS: Record<AgentRole, string>` — one-sentence description per role\n  - `AGENT_ROLE_PHASES: Record<AgentRole, readonly ProjectPhase[]>` — primary phase(s) per role (e.g., Dreamer → [sketch], Harmonizer → [plan, eval])\n- No backend or persistence changes.\n\n## API Specification\n\n- No new API endpoints. All data is static and shipped with the frontend via shared package.\n\n## UI/UX Requirements\n\n- **Agent reference modal:**\n  - Opens from Navbar \"Help\" or \"Agents\" control.\n  - Displays 9 agents in a readable grid (e.g., 3 columns on desktop, 1–2 on mobile).\n  - Each card: icon (48px), name, phase badge(s), description text.\n  - Close via X button or click outside.\n  - Matches theme (light/dark) and design system.\n- **Phase context:**\n  - Sketch: Visible in chat header or above PRD; non-intrusive.\n  - Execute: Agent dropdown items show description on hover (tooltip) or in a small expandable area.\n- **Setup wizard:** Collapsible section defaults to collapsed; expands to show compact agent info or link to full reference.\n\n## Edge Cases and Error Handling\n\n- **Missing icon:** If an agent icon is missing, fall back to a generic placeholder or first letter of role name.\n- **Unknown role:** Backend may return roles not in `AGENT_ROLE_CANONICAL_ORDER`; gracefully display label and \"Unknown phase\" or omit phase badge.\n- **Modal from setup:** If `AgentReferenceModal` is opened during project setup (before project exists), ensure it renders correctly without project context (modal content does not depend on project).\n- **Offline:** All content is static; no network required.\n\n## Testing Strategy\n\n- **Unit tests:**\n  - `agent.test.ts`: Verify `AGENT_ROLE_DESCRIPTIONS` and `AGENT_ROLE_PHASES` have entries for all `AgentRole` values.\n  - `AgentReferenceModal.test.tsx`: Renders all agents, shows descriptions, closes on button/outside click.\n  - `AgentsStep.test.tsx`: Collapsible \"About the agent team\" section renders and expands.\n- **Integration tests:**\n  - Navbar: Click Help/Agents opens modal; modal content is visible.\n  - Sketch: Chat header shows \"Chatting with Dreamer\" (or equivalent).\n- **E2E (optional):** User can open agent reference from home and from project view without leaving the app.\n\n## Estimated Complexity\n\n**Medium.** Involves shared constants, one new modal component, Navbar changes, phase-specific UI tweaks, and setup wizard enhancement. No backend work. Estimated 1–2 agent sessions.\n",
  "complexity": "medium",
  "mockups": [
    {
      "title": "Agent Reference Modal",
      "content": "+--------------------------------------------------------------------------------------------------+\n|  Meet the Agent Team                                                    [X]                           |\n+--------------------------------------------------------------------------------------------------+\n|                                                                                                    |\n|  +----------------+  +----------------+  +----------------+  +----------------+                  |\n|  | [dreamer.svg]  |  | [planner.svg]  |  | [harmonizer]   |  | [analyst.svg]  |                  |\n|  | Dreamer        |  | Planner        |  | Harmonizer     |  | Analyst        |                  |\n|  | Sketch         |  | Plan           |  | Plan, Eval     |  | Evaluate       |                  |\n|  | The wise       |  | The brilliant  |  | The steady     |  | With eyes that |                  |\n|  | conversational-|  | strategist who |  | keeper of the  |  | miss nothing,  |                  |\n|  | ist who...     |  | decomposes...  |  | central...     |  | categorizes... |                  |\n|  +----------------+  +----------------+  +----------------+  +----------------+                  |\n|                                                                                                    |\n|  +----------------+  +----------------+  +----------------+  +----------------+  +-------------+ |\n|  | [summarizer]   |  | [auditor.svg]  |  | [coder.svg]    |  | [reviewer.svg] |  | [merger]     | |\n|  | Summarizer     |  | Auditor        |  | Coder          |  | Reviewer       |  | Merger       | |\n|  | Execute        |  | Plan (Re-exec) |  | Execute        |  | Execute        |  | Execute      | |\n|  | Ever-faithful  |  | Surveys what   |  | Full of energy |  | Principled and |  | Clever and   | |\n|  | and efficient  |  | has actually   |  | and occasionally|  | demanding...   |  | unflappable..| |\n|  | distills...    |  | been built...  |  | chaotic...     |  |                |  |              | |\n|  +----------------+  +----------------+  +----------------+  +----------------+  +-------------+ |\n|                                                                                                    |\n+--------------------------------------------------------------------------------------------------+"
    },
    {
      "title": "Sketch Phase - Chat Header with Agent Context",
      "content": "+--------------------------------------------------------------------------------------------------+\n|  [OpenSprint logo]  Sketch  Plan  Execute  Evaluate  Deliver    [Agents ?] [Settings] [Project v]   |\n+--------------------------------------------------------------------------------------------------+\n|                                                                                                    |\n|  +---------------------------+  +---------------------------------------------------------------+  |\n|  | Chat with Dreamer          |  |  PRD Document                                              |  |\n|  | Refines your idea into a   |  |                                                             |  |\n|  | PRD, asks clarifying Qs    |  |  ## Executive Summary                                       |  |\n|  +---------------------------+  |  ...                                                         |  |\n|  |                             |  |                                                             |  |\n|  | [User message]              |  |                                                             |  |\n|  | [Dreamer response]          |  |                                                             |  |\n|  | [Input field...]            |  |                                                             |  |\n|  +---------------------------+  +---------------------------------------------------------------+  |\n|                                                                                                    |\n+--------------------------------------------------------------------------------------------------+"
    },
    {
      "title": "Navbar with Help/Agents Entry Point",
      "content": "+--------------------------------------------------------------------------------------------------+\n|  [Logo]  Sketch  Plan  Execute  Evaluate  Deliver     [2 agents] [ ? ] [Settings] [Project v]        |\n|                                              ^              ^                                        |\n|                                              |              |                                        |\n|                                    Running agents    Help/Agents (opens modal)                       |\n+--------------------------------------------------------------------------------------------------+"
    }
  ],
  "tasks": [
    {
      "title": "Add AGENT_ROLE_DESCRIPTIONS and AGENT_ROLE_PHASES to shared package",
      "description": "Extend packages/shared/src/types/agent.ts with AGENT_ROLE_DESCRIPTIONS (Record<AgentRole, string>) and AGENT_ROLE_PHASES (Record<AgentRole, readonly ProjectPhase[]>). Use README descriptions as source. Add unit tests in agent.test.ts verifying all roles have entries.",
      "priority": 0,
      "dependsOn": []
    },
    {
      "title": "Create AgentReferenceModal component",
      "description": "Create packages/frontend/src/components/AgentReferenceModal.tsx. Renders modal/slide-over with grid of 9 agents: icon (from public/agent-icons/), name (AGENT_ROLE_LABELS), phase badge(s) (AGENT_ROLE_PHASES), description (AGENT_ROLE_DESCRIPTIONS). Close on X or outside click. Theme-aware. Add AgentReferenceModal.test.tsx with render and close tests.",
      "priority": 1,
      "dependsOn": ["Add AGENT_ROLE_DESCRIPTIONS and AGENT_ROLE_PHASES to shared package"]
    },
    {
      "title": "Add Help/Agents entry point to Navbar",
      "description": "Add a Help (?) or Agents icon/button to the Navbar (next to settings). Click opens AgentReferenceModal. Ensure modal renders when no project is selected (home view). Add integration test for open/close behavior.",
      "priority": 2,
      "dependsOn": ["Create AgentReferenceModal component"]
    },
    {
      "title": "Add phase-specific agent context to Sketch chat",
      "description": "In PrdChatPanel or SketchPhase, add a header/callout above or beside the chat: 'Chatting with Dreamer' plus one-line description from AGENT_ROLE_DESCRIPTIONS.dreamer. Keep it compact and non-intrusive.",
      "priority": 3,
      "dependsOn": ["Add AGENT_ROLE_DESCRIPTIONS and AGENT_ROLE_PHASES to shared package"]
    },
    {
      "title": "Enhance ActiveAgentsList with agent descriptions on hover",
      "description": "In ActiveAgentsList dropdown items, add a tooltip or small expandable area showing AGENT_ROLE_DESCRIPTIONS[agent.role] when user hovers or expands. Reuse shared metadata.",
      "priority": 4,
      "dependsOn": ["Add AGENT_ROLE_DESCRIPTIONS and AGENT_ROLE_PHASES to shared package"]
    },
    {
      "title": "Add 'About the agent team' section to AgentsStep",
      "description": "In ProjectSetupWizard AgentsStep, add a collapsible section 'What do these agents do?' that expands to show a compact agent list (icon, name, phase, 1-line description) or a 'Learn more' link that opens AgentReferenceModal. Default collapsed.",
      "priority": 5,
      "dependsOn": ["Create AgentReferenceModal component"]
    }
  ]
}
