{
  "title": "Simplified Create Project Flow",
  "content": "# Simplified Create Project Flow\n\n## Overview\n\nImprove user onboarding by separating the project creation experience into two distinct flows: **Create New** (scaffold from template) and **Add Existing** (existing Project Setup wizard). The homepage is redesigned to show projects as individual cards (like the Evaluate Feedback list) instead of a table, with \"Create New\" and \"Add Existing\" buttons in the header next to the project page title.\n\n## Acceptance Criteria\n\n- Remove \"Create project\" row from the projects table inline\n- Redesign projects list: each project is a card (like Evaluate Feedback cards), not a table row\n- \"Create New\" and \"Add Existing\" buttons appear in the top right, inline with the \"Projects\" page title\n- Add Existing links to existing Project Setup flow; route `/projects/new`; title bar shows \"Add Existing Project\"\n- Create New links to new 3-page wizard at `/projects/create-new`; title bar shows \"Create New Project\"\n- Create New Page 1: Project Name, Project Folder (with browse), Template dropdown (only \"Web App (Expo/React)\" for now)\n- Create New Page 2: Simplified agent config — API keys + provider/model selection only; no git work mode, no parallelism (use defaults in background)\n- Create New Page 3: Loading spinner while scaffolding runs; then show OS-dependent run command (e.g. `cd <folder> && npm run web`); \"I'm Ready\" navigates to project\n- Scaffolding includes `npm install` and creates a runnable Expo/React web app\n\n## Technical Approach\n\n### Homepage\n\n- Replace table layout with a grid of project cards. Each card uses `card p-4` (same as FeedbackCard). Cards are clickable.\n- Add header row: `flex justify-between items-center` with `h1` \"Projects\" on left and \"Create New\" + \"Add Existing\" buttons on right.\n- Add Existing: `navigate(\"/projects/new\")`. Create New: `navigate(\"/projects/create-new\")`.\n\n### Add Existing Flow\n\n- Rename ProjectSetup page title from \"Create New Project\" to \"Add Existing Project\" when used as Add Existing.\n- Route `/projects/new` remains; no code path changes beyond title and copy.\n\n### Create New Flow\n\n- New route: `/projects/create-new` → new page `CreateNewProjectPage`.\n- Three steps: `basics` | `agents` | `scaffold`.\n- **Page 1 (basics):** Project name, project folder (FolderBrowser), template dropdown (single option: \"Web App (Expo/React)\").\n- **Page 2 (agents):** Simplified AgentsStep variant — only API keys + provider/model for Simple and Complex; omit git work mode, parallelism, unknown scope strategy.\n- **Page 3 (scaffold):** Call `POST /projects/scaffold` with body `{ name, parentPath, template, simpleComplexityAgent, complexComplexityAgent }`. Backend scaffolds project folder, runs `npm install`, registers project in index, returns `{ project, runCommand }`. Run command is OS-dependent.\n\n### Backend Scaffolding\n\n- New endpoint: `POST /api/v1/projects/scaffold`.\n- For template \"web-app-expo-react\": create folder at `parentPath/name`, run `npx create-expo-app@latest . --template blank --yes` in that folder, then `npm install`.\n- After scaffolding, add `.opensprint` structure via shared createProject logic; use defaults for gitWorkingMode, maxConcurrentCoders, deployment, hilConfig.\n- Return `{ project, runCommand }` where runCommand is platform-specific: Windows uses `cd /d <path>`, else `cd <path>`; append `&& npm run web`.\n\n### Simplified Agent Config\n\n- Extract `SimplifiedAgentsStep` (or reuse AgentsStep with props to hide git/parallelism). Only show: API key inputs, provider selection, model selection.\n\n## Dependencies\n\n- `create-expo-app` (via npx) — must be available on user machine\n- Node.js for `npm install`\n- No new npm packages\n\n## Data Model Changes\n\n- None. Project index and settings schema unchanged.\n\n## API Specification\n\n### POST /api/v1/projects/scaffold\n\n**Request:** `application/json`\n\n```json\n{\n  \"name\": \"Project Name\",\n  \"parentPath\": \"/absolute/path/to/parent\",\n  \"template\": \"web-app-expo-react\",\n  \"simpleComplexityAgent\": { \"type\": \"cursor\", \"model\": \"...\", \"cliCommand\": \"\" },\n  \"complexComplexityAgent\": { \"type\": \"cursor\", \"model\": \"...\", \"cliCommand\": \"\" }\n}\n```\n\n**Response:** `201 Created`\n\n```json\n{\n  \"data\": {\n    \"project\": { \"id\": \"...\", \"name\": \"...\", \"repoPath\": \"...\", \"currentPhase\": \"sketch\", \"createdAt\": \"...\", \"updatedAt\": \"...\" },\n    \"runCommand\": \"cd /path/to/project && npm run web\"\n  }\n}\n```\n\n**Errors:** `400` if path invalid, folder exists, or template unknown; `500` if scaffold fails.\n\n## UI/UX Requirements\n\n- Projects list: card grid, responsive; each card shows name, path (truncated), phase badge. Kebab menu for Archive/Delete.\n- Header: \"Projects\" title left; \"Create New\" (primary) and \"Add Existing\" (secondary) right.\n- Create New wizard: step 1 of 3, 2 of 3, 3 of 3 progress bar; Back/Next navigation.\n- Page 3: Spinner with \"Building your project...\" during scaffold; on success: \"Your project is ready!\" with run command in code block; \"I'm Ready\" primary button.\n\n## Edge Cases and Error Handling\n\n- Project folder already exists: validate before scaffold; return 409 with message.\n- Parent path doesn't exist or isn't writable: 400.\n- `create-expo-app` or `npm install` fails: 500 with user-friendly message; suggest checking Node/npm.\n- Existing project at same path: check for `.opensprint` and adopt or open existing.\n- API keys missing on Page 2: show warning; allow proceeding but warn.\n\n## Testing Strategy\n\n- Unit: CreateNewProjectPage step rendering; SimplifiedAgentsStep renders only API/provider/model.\n- Integration: POST /projects/scaffold with temp dir; verify folder created, .opensprint present, runCommand correct for platform.\n- E2E: Create New flow end-to-end; Add Existing flow still works.\n- Update HomeScreen.test.tsx: remove create-project-row; add create-new/add-existing button tests.\n\n## Estimated Complexity\n\n**Plan-level:** medium",
  "complexity": "medium",
  "mockups": [
    {
      "title": "Main Screen (Projects List)",
      "content": "┌─────────────────────────────────────────────────────────────────────────────┐\n│  Projects                          [ Create New ]  [ Add Existing ]          │\n├─────────────────────────────────────────────────────────────────────────────┤\n│                                                                              │\n│  ┌─────────────────────────────────────┐  ┌─────────────────────────────────┐│\n│  │ My Project                          │  │ Another App                      ││\n│  │ /Users/todd/projects/my-project     │  │ /Users/todd/projects/another     ││\n│  │ Sketch                    ⋮         │  │ Execute                  ⋮       ││\n│  └─────────────────────────────────────┘  └─────────────────────────────────┘│\n│                                                                              │\n│  ┌─────────────────────────────────────┐                                     │\n│  │ Third Project                       │                                     │\n│  │ /Users/todd/projects/third          │                                     │\n│  │ Plan                    ⋮           │                                     │\n│  └─────────────────────────────────────┘                                     │\n│                                                                              │\n└─────────────────────────────────────────────────────────────────────────────┘"
    },
    {
      "title": "Create New — Page 3 (Success)",
      "content": "┌─────────────────────────────────────────────────────────────────────────────┐\n│  Create New Project — Building your project                                  │\n│  Step 3 of 3  ████████████████████████████████████████ 100%                  │\n├─────────────────────────────────────────────────────────────────────────────┤\n│  ┌─────────────────────────────────────────────────────────────────────┐   │\n│  │  ✓ Your project is ready!                                            │   │\n│  │  Run your app:                                                        │   │\n│  │  ┌─────────────────────────────────────────────────────────────┐    │   │\n│  │  │ cd /Users/todd/projects/my-app && npm run web                │    │   │\n│  │  └─────────────────────────────────────────────────────────────┘    │   │\n│  │  [ I'm Ready ]                                                       │   │\n│  └─────────────────────────────────────────────────────────────────────┘   │\n└─────────────────────────────────────────────────────────────────────────────┘"
    },
    {
      "title": "Create New — Page 3 (Loading)",
      "content": "┌─────────────────────────────────────────────────────────────────────────────┐\n│  Create New Project — Building your project                                  │\n│  Step 3 of 3  ████████████████████████████████████████ 100%                  │\n├─────────────────────────────────────────────────────────────────────────────┤\n│  ┌─────────────────────────────────────────────────────────────────────┐   │\n│  │                    ⟳  Building your project...                       │   │\n│  │                    Creating scaffolding and installing dependencies │   │\n│  └─────────────────────────────────────────────────────────────────────┘   │\n└─────────────────────────────────────────────────────────────────────────────┘"
    }
  ],
  "tasks": [
    {
      "title": "Redesign HomeScreen: project cards and header buttons",
      "description": "Replace projects table with card grid (each project as card p-4 like FeedbackCard). Add header row with 'Projects' title left and 'Create New' (primary) + 'Add Existing' (secondary) buttons right. Remove inline create-project row. Update HomeScreen.test.tsx: remove create-project-row assertions; add tests for create-new and add-existing buttons.",
      "priority": 0,
      "dependsOn": [],
      "complexity": "simple"
    },
    {
      "title": "Rename Add Existing flow: ProjectSetup title and route",
      "description": "Update ProjectSetup page: change title from 'Create New Project' to 'Add Existing Project'. Route /projects/new unchanged. Update any references in code/comments to 'Add Existing Project'.",
      "priority": 1,
      "dependsOn": [],
      "complexity": "simple"
    },
    {
      "title": "Add route and CreateNewProjectPage skeleton",
      "description": "Add route /projects/create-new in App.tsx. Create CreateNewProjectPage with 3-step wizard (basics, agents, scaffold). Implement Page 1: Project Name, Project Folder (FolderBrowser), Template dropdown with single option 'Web App (Expo/React)'. Progress bar and Back/Next navigation.",
      "priority": 2,
      "dependsOn": [],
      "complexity": "simple"
    },
    {
      "title": "Create SimplifiedAgentsStep component",
      "description": "Extract or create SimplifiedAgentsStep: only API key inputs, provider selection, model selection for Simple and Complex. Omit git work mode, parallelism, unknown scope strategy. Reuse ModelSelect, env key handling from AgentsStep.",
      "priority": 3,
      "dependsOn": [],
      "complexity": "simple"
    },
    {
      "title": "Wire CreateNewProjectPage Page 2 with SimplifiedAgentsStep",
      "description": "Integrate SimplifiedAgentsStep into CreateNewProjectPage step 2. Load env keys on step entry. Validate agent config before Next. Pass agent config to scaffold step.",
      "priority": 4,
      "dependsOn": ["Add route and CreateNewProjectPage skeleton", "Create SimplifiedAgentsStep component"],
      "complexity": "simple"
    },
    {
      "title": "Implement POST /projects/scaffold backend",
      "description": "Add scaffold endpoint: validate name, parentPath, template. For web-app-expo-react: mkdir parentPath/name, run npx create-expo-app@latest . --template blank --yes in that folder, npm install. Call shared createProject logic to add .opensprint, register in index, persist settings (defaults for git, deployment, hil). Return { project, runCommand } with platform-specific cd command + 'npm run web'.",
      "priority": 5,
      "dependsOn": [],
      "complexity": "complex"
    },
    {
      "title": "Add api.projects.scaffold and wire Page 3",
      "description": "Add api.projects.scaffold() in frontend client. CreateNewProjectPage Page 3: on mount call scaffold; show spinner 'Building your project...' during request; on success show 'Your project is ready!' with run command in code block and 'I'm Ready' button; on click navigate to project. Handle errors with user-friendly message.",
      "priority": 6,
      "dependsOn": ["Implement POST /projects/scaffold backend", "Wire CreateNewProjectPage Page 2 with SimplifiedAgentsStep"],
      "complexity": "simple"
    },
    {
      "title": "Add scaffold endpoint tests",
      "description": "Integration tests for POST /projects/scaffold: temp dir, valid request, verify folder created, .opensprint present, runCommand format correct for platform. Test 400 for existing folder, invalid path. Test 500 handling for scaffold failure.",
      "priority": 7,
      "dependsOn": ["Implement POST /projects/scaffold backend"],
      "complexity": "simple"
    }
  ]
}
